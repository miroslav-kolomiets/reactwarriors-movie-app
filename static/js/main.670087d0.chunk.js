(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),s=a.n(i),o=a(6),c=a(7),l=a(1),u=a(2),p=a(4),m=a(3),h=a(5),g=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sort_by,a=e.onChangeFilters,n=e.options;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"sort_by"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"),r.a.createElement("select",{className:"form-control",id:"sort_by",name:"sort_by",value:t,onChange:a},n.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))}}]),t}(r.a.Component);g.defaultProps={options:[{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"popularity.desc"},{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"popularity.asc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"vote_average.desc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"vote_average.asc"}]};var b=a(11),v="https://api.themoviedb.org/3",f="5265606bb69e99437c85eb04dc6f29b5",d=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).onChangeGenresFilters=function(t){var a=t.target.value,n=t.target.name,r=e.props.with_genres;e.props.onChangeFilters({target:{name:n,value:r.includes(a)?r.filter(function(e){return e!==a}):[].concat(Object(b.a)(r),[a])}})},e.getGenres=function(){var t="".concat(v,"/genre/movie/list?api_key=").concat(f,"&language=en-US");fetch(t).then(function(e){return e.json()}).then(function(t){e.setState({genres:t.genres})})},e.state={genres:[]},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getGenres()}},{key:"render",value:function(){var e=this,t=this.state.genres;return r.a.createElement("div",null,t.map(function(t){return r.a.createElement("div",{className:"form-check",key:t.id},r.a.createElement("input",{className:"form-check-input",type:"checkbox",onChange:e.onChangeGenresFilters,name:"with_genres",value:t.id,id:t.id}),r.a.createElement("label",{className:"form-check-label",htmlFor:"defaultCheck1"},t.name))}))}}]),t}(r.a.Component),y=(new Date).getFullYear(),_=Array.from(new Array(20),function(e,t){return y-t}),j=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.primary_release_year,a=e.onChangeFilters;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"primary_release_year"},"\u0413\u043e\u0434 \u0432\u044b\u043f\u0443\u0441\u043a\u0430:"),r.a.createElement("select",{className:"form-control",id:"primary_release_year",name:"primary_release_year",value:t,onChange:a},_.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}]),t}(r.a.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.page,a=e.total_pages,n=e.onChangePagination;return r.a.createElement("div",null,r.a.createElement("div",{className:"btn-group btn-block",role:"group","aria-label":"Basic example"},r.a.createElement("button",{type:"button",className:"btn btn-light",disabled:1===t,onClick:function(){return n({name:"page",value:t-1})}},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){return n({name:"page",value:t+1})}},"\u0412\u043f\u0435\u0440\u0435\u0434")),r.a.createElement("p",{className:"text-center p-3 text-center"},"".concat(t," \u0438\u0437 ").concat(a)))}}]),t}(r.a.Component),E=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"btn-group btn-block",role:"group","aria-label":"Basic example"},r.a.createElement("button",{type:"button",className:"btn btn-light btn-block",onClick:this.props.resetFilters},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"))}}]),t}(r.a.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,a=t.sort_by,n=t.primary_release_year,i=t.with_genres,s=e.pagination,o=s.page,c=s.total_pages,l=e.onChangePagination,u=e.resetFilters,p=e.onChangeFilters;return r.a.createElement("form",{className:"mb-3"},r.a.createElement(g,{sort_by:a,onChangeFilters:p}),r.a.createElement(j,{primary_release_year:n,onChangeFilters:p}),r.a.createElement(d,{with_genres:i,onChangeFilters:p}),r.a.createElement(O,{onChangePagination:l,total_pages:c,page:o}),r.a.createElement(E,{resetFilters:u}))}}]),t}(r.a.Component),k=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.item;return r.a.createElement("div",{className:"card",style:{width:"100%"}},r.a.createElement("img",{className:"card-img-top card-img--height",src:"https://image.tmdb.org/t/p/w500".concat(e.backdrop_path||e.poster_path),alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},e.title),r.a.createElement("div",{className:"card-text"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",e.vote_average),r.a.createElement("div",{className:"card-text"},"\u0420\u0435\u043b\u0438\u0437: ",e.release_date)))}}]),t}(r.a.Component),N=a(10),F=a.n(N),w=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).getMovies=function(t,a){var n=t.sort_by,r=t.primary_release_year,i=t.with_genres,s=a.page,o="".concat(v,"/discover/movie?api_key=").concat(f,"&language=ru-RU&sort_by=").concat(n,"&page=").concat(s,"&primary_release_year=").concat(r,"&with_genres=").concat(i);fetch(o).then(function(e){return e.json()}).then(function(t){e.setState({movies:t.results}),e.props.onChangePagination({name:"total_pages",value:t.total_pages})})},e.state={movies:[]},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getMovies(this.props.filters,this.props.pagination)}},{key:"componentDidUpdate",value:function(e){F.a.isEqual(this.props.filters,e.filters)||(this.getMovies(this.props.filters,1),this.props.onChangePagination(1)),this.props.pagination.page!==e.pagination.page&&this.getMovies(this.props.filters,this.props.pagination)}},{key:"render",value:function(){var e=this.state.movies;return r.a.createElement("div",{className:"row"},e.map(function(e){return r.a.createElement("div",{key:e.id,className:"col-6 mb-4"},r.a.createElement(k,{item:e}))}))}}]),t}(n.Component),P=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).onChangeFilters=function(t){var a=t.target.name,n=t.target.value,r=Object(c.a)({},e.state.filters,Object(o.a)({},a,n));e.setState({filters:r})},e.resetFilters=function(){e.setState(function(e){return{filters:{sort_by:"popularity.desc",primary_release_year:"",with_genres:[]},pagination:{page:1,total_pages:0}}})},e.onChangePagination=function(t){var a=t.name,n=t.value;e.setState(function(e){return{pagination:Object(c.a)({},e.pagination,Object(o.a)({},a,n))}})},e.state={filters:{sort_by:"popularity.desc",primary_release_year:"",with_genres:[]},pagination:{page:1,total_pages:0}},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.filters,a=e.pagination;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"card",style:{width:"100%"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,"\u0424\u0438\u043b\u044c\u0442\u0440\u044b:"),r.a.createElement(C,{pagination:a,filters:t,resetFilters:this.resetFilters,onChangePagination:this.onChangePagination,onChangeFilters:this.onChangeFilters})))),r.a.createElement("div",{className:"col-8"},r.a.createElement(w,{pagination:a,movies:this.state.movies,getMovies:this.getMovies,filters:this.state.filters,onChangePagination:this.onChangePagination}))))}}]),t}(r.a.Component);a(19),a(20);s.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.670087d0.chunk.js.map